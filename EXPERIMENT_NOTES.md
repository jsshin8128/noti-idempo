# 실험 노트

## 실험 결과

### 테스트 설정
- 동시 요청: 200 스레드 × 20회 = 4,000건
- DB: H2 (인메모리)
- 커넥션 풀: 3개

### 결과

```
총 요청 수: 4,000건
성공 (발송): 11건  ⚠️ (예상: 1건)
중복 방지: 3,989건
에러: 0건
총 소요 시간: 61,824ms

평균 응답 시간: 2,973.64ms
최대 응답 시간: 9,791ms
최소 응답 시간: 7ms
1초 이상 걸린 요청: 3,929건 (98.2%)
총 Lock 대기 시간: 7,953,337ms (약 132분)
TPS: 64.70
```

### 검증된 문제점

1. **Race Condition**: 11건 중복 발송 (예상 1건)
2. **DB 부하**: 평균 응답 시간 2,973.64ms
3. **Lock 경쟁**: 총 대기 시간 7,953,337ms
4. **응답 지연**: 최대 응답 시간 9,791ms
5. **Deadlock 가능성**: Lock 경쟁이 심각하여 발생 조건 충족 (H2가 자동 해결 가능)
